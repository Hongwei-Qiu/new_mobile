(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/caigou/purchase/purchase"],{"0f70":function(t,e,n){"use strict";(function(t){n("df48");i(n("66fd"));var e=i(n("5deb"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"150e":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s(n("fa94")),a=s(n("7fee")),r=s(n("9752"));function s(t){return t&&t.__esModule?t:{default:t}}function u(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=o(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,r=!0,s=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function o(t,e){if(t){if("string"===typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var l=function(){n.e("components/tabbar/caigou").then(function(){return resolve(n("2742"))}.bind(null,n)).catch(n.oe)},d=function(){n.e("components/ms-tabs/ms-tabs").then(function(){return resolve(n("18de"))}.bind(null,n)).catch(n.oe)},f=function(){n.e("components/w-picker/w-picker").then(function(){return resolve(n("3be1"))}.bind(null,n)).catch(n.oe)},p=getApp().globalData,m=p.navBar,h=p.appid,b=p.appsecret,v={components:{tabar:l,msTabs:d,wPicker:f},data:function(){return{navBar:m,tabNum:1,isShow:"空",bitmap:!0,type:[],active:"",cate_id:"",selectorVisible:!1,dateVisible1:!1,supplier:[],time:"",defaultProps:{label:"label",value:"value"},selectorList:[],itemList:[],topGood:"",showTabar:!0,supplier_ids:[]}},watch:{active:function(){this.cate_id=this.type[this.active].id,this.requestItemList()}},methods:{askTop:function(){var t=this.topGood;function e(e,n){if(-1!=e.title.indexOf(t))return-1}this.itemList.sort(e)},checkedIndex:function(t){this.selectorList[t].status=!this.selectorList[t].status,this.supplier_ids=[];var e,n=u(this.selectorList);try{for(n.s();!(e=n.n()).done;){var i=e.value;1==i.status&&this.supplier_ids.push(i.value)}}catch(a){n.e(a)}finally{n.f()}this.requestItemList(),console.log(this.supplier_ids)},submit:function(t,e){var n=this,r=t.list_id,s=t.num,u=t.price,o=s*u,c=Math.round((new Date).getTime()/1e3);if(s)if(u){var l={id:r,num:s,price:u,total:o,appid:h,timeStamp:c},d=i.default.hexMD5(a.default.objKeySort(l)+b),f=Object.assign({sign:d},l);a.default.postRequests("buyerInputPrice",f,(function(t){var i=t.data;200==i.code?(a.default.Toast("完成"),n.itemList.splice(e,1)):a.default.Toast(i.msg)}))}else a.default.Toast("请输入单价");else a.default.Toast("请输入数量")},onConfirm1:function(t,e){this.time=t.result,this.requestItemList()},requestItemCate:function(){var t=this;t.list=[];var e=Math.round((new Date).getTime()/1e3),n={appid:h,timeStamp:e},r=i.default.hexMD5(a.default.objKeySort(n)+b),s={appid:h,timeStamp:e,sign:r};a.default.getRequests("firstItemCate",s,(function(e){200==e.data.code?t.type=e.data.data:a.default.Toast(e.data.msg)}))},requestSupplier:function(){var t=this,e=Math.round((new Date).getTime()/1e3),n={appid:h,timeStamp:e},r=i.default.hexMD5(a.default.objKeySort(n)+b),s={appid:h,timeStamp:e,sign:r};a.default.getRequests("supplier",s,(function(e){if(200==e.data.code){t.selectorList=[];var n,i=u(e.data.data);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.status=!1,t.selectorList.push(r)}}catch(s){i.e(s)}finally{i.f()}}else a.default.Toast(e.data.msg)}))},requestItemList:function(){var t=this,e=this;e.itemList=[];var n=Math.round((new Date).getTime()/1e3),r={appid:h,timeStamp:n},s=i.default.hexMD5(a.default.objKeySort(r)+b),u={appid:h,timeStamp:n,supplier_id:e.supplier_ids,created_at:e.time,cate_id:e.cate_id,sign:s};a.default.getRequests("buyerItemList",u,(function(n){200==n.data.code?(n.data.data.list.map((function(t,n){e.itemList.push(Object.assign({},t,{num:"",price:""}))})),0==n.data.data.list.length?t.bitmap=!1:t.bitmap=!0):a.default.Toast(n.data.msg)}))}},onShow:function(){this.time=r.default.formatDate(),this.requestItemCate(),this.requestSupplier(),this.requestItemList()}};e.default=v},"433e":function(t,e,n){"use strict";n.r(e);var i=n("150e"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},"5deb":function(t,e,n){"use strict";n.r(e);var i=n("d49c"),a=n("433e");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);n("c18b");var s,u=n("f0c5"),o=Object(u["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],s);e["default"]=o.exports},8379:function(t,e,n){},c18b:function(t,e,n){"use strict";var i=n("8379"),a=n.n(i);a.a},d49c:function(t,e,n){"use strict";var i={myApphead:function(){return n.e("components/my-apphead/index").then(n.bind(null,"070c"))},msTabs:function(){return n.e("components/ms-tabs/ms-tabs").then(n.bind(null,"18de"))},myBitmap:function(){return n.e("components/my-bitmap/index").then(n.bind(null,"362b"))},wPicker:function(){return n.e("components/w-picker/w-picker").then(n.bind(null,"3be1"))}},a=function(){var t=this,e=t.$createElement,n=(t._self._c,t.bitmap?t.__map(t.itemList,(function(e,n){var i=t.__get_orig(e),a=t.isShow==e?t.__map(e.remark.split(","),(function(e,n){var i=t.__get_orig(e),a=e.split("（"),r=e.substring(e.indexOf("（")+1,e.indexOf("）")),s=""!=r?e.substring(e.indexOf("（")+1,e.indexOf("）")):null;return{$orig:i,g0:a,g1:r,g2:s}})):null;return{$orig:i,l0:a}})):null);t._isMounted||(t.e0=function(e){t.dateVisible1=!0},t.e1=function(e){t.selectorVisible=!0},t.e2=function(e){t.isShow="空"},t.e3=function(e,n){var i=arguments[arguments.length-1].currentTarget.dataset,a=i.eventParams||i["event-params"];n=a.item;t.isShow=n},t.e4=function(e,n){var i=arguments[arguments.length-1].currentTarget.dataset,a=i.eventParams||i["event-params"];n=a.item;t.isShow=n},t.e5=function(e){t.selectorVisible=!1}),t.$mp.data=Object.assign({},{$root:{l1:n}})},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))}},[["0f70","common/runtime","common/vendor"]]]);