(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/caigou/enquiry/enquiry"],{"453d":function(t,e,i){"use strict";(function(t){i("df48");a(i("66fd"));var e=a(i("61a3"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},"61a3":function(t,e,i){"use strict";i.r(e);var a=i("9476"),n=i("b8c5");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("d4d6");var r,s=i("f0c5"),u=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],r);e["default"]=u.exports},9476:function(t,e,i){"use strict";var a={myApphead:function(){return i.e("components/my-apphead/index").then(i.bind(null,"070c"))},myBitmap:function(){return i.e("components/my-bitmap/index").then(i.bind(null,"362b"))},wPicker:function(){return i.e("components/w-picker/w-picker").then(i.bind(null,"3be1"))},uniIcons:function(){return Promise.all([i.e("common/vendor"),i.e("components/uni-icons/uni-icons")]).then(i.bind(null,"a30f"))}},n=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.showWare=!0},t.e1=function(e){t.searchKey=2},t.e2=function(e){t.firstWare=!0},t.e3=function(e){t.dateVisible2=!0},t.e4=function(e){t.showWare=!1},t.e5=function(e){t.showWaretwo=!1},t.e6=function(e){t.searchKey=0})},o=[];i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}))},b8c5:function(t,e,i){"use strict";i.r(e);var a=i("bb2e"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},bb2e:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r(i("fa94")),n=r(i("7fee")),o=r(i("9752"));function r(t){return t&&t.__esModule?t:{default:t}}function s(t){return c(t)||d(t)||f(t)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function c(t){if(Array.isArray(t))return m(t)}function l(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=f(t))){var e=0,i=function(){};return{s:i,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,n,o=!0,r=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return o=t.done,t},e:function(t){r=!0,n=t},f:function(){try{o||null==a.return||a.return()}finally{if(r)throw n}}}}function f(t,e){if(t){if("string"===typeof t)return m(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?m(t,e):void 0}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}var h=function(){i.e("components/w-picker/w-picker").then(function(){return resolve(i("3be1"))}.bind(null,i)).catch(i.oe)},p=function(){i.e("components/tabbar/caigou").then(function(){return resolve(i("2742"))}.bind(null,i)).catch(i.oe)},y=function(){i.e("components/w-picker2/w-picker").then(function(){return resolve(i("8355"))}.bind(null,i)).catch(i.oe)},b=getApp().globalData,w=b.navBar,g=b.appid,v=b.appsecret,_={components:{tabar:p,wPicker:h,ePicker:y},data:function(){return{navBar:w,bitmap:!1,bitmaptwo:!0,showWare:!1,firstWare:!1,showCopy:!1,searchKey:0,wareName:"",isActive:1,tabNum:3,time:"",time2:"",dateVisible1:!1,dateVisible2:!1,list:[{tab:"历史记录",id:1},{tab:"发起询价",id:2}],wareList:[],wareListtwo:[],wareAttr:"请选择",wareListProps:{label:"value",value:"item_id"},wareListtwoProps:{label:"attr_title",value:"item_id"},search:"",searchtwo:"",keyList:[],keyListtwo:[],attr_id:"",item_id:"",attr_idtwo:"",item_idtwo:"",purchases:"",enquiryList:[],showFind:!1,wareAttrtwo:"请选择",goodname:"",historyDate:"",historyList:[]}},methods:{closeCopy:function(){this.showCopy=!1,this.commodityBuyerList()},copySign:function(t,e){var i=this,o=n.default.timeStamp(),r={appid:g,timeStamp:o},s=a.default.hexMD5(n.default.objKeySort(r)+v),u=Object.assign({sign:s,date:this.time,list_ids:String(t.id)},r);n.default.postRequests("copyItem",u,(function(t){200==t.data.code?(n.default.Toast("复制成功"),i.historyList.splice(e,1)):n.default.Toast(t.data.msg)}))},copyAll:function(t){var e,i=this,o=n.default.timeStamp(),r={appid:g,timeStamp:o},s=this.historyList,u=0,d=[],c=l(s);try{for(c.s();!(e=c.n()).done;){var f=e.value;f.status&&(u++,d.push(f.id))}}catch(p){c.e(p)}finally{c.f()}if(0!=u){var m=a.default.hexMD5(n.default.objKeySort(r)+v),h=Object.assign({sign:m,date:this.time,list_ids:d.join(",")},r);n.default.postRequests("copyItem",h,(function(t){200==t.data.code?(n.default.Toast("复制成功"),i.historySearch()):n.default.Toast(t.data.msg)}))}else n.default.Toast("未选择复制的商品")},showPurchase:function(){this.$refs.date.show()},onConfirm:function(t,e){this.time=t.value},tabs:function(t,e){this.isActive=e},queryPrice:function(){this.searchKey=1},backPage:function(){this.searchKey=0},getWord:function(t){var e=this;if(this.search=t.detail.value,t.detail.value.length){var i=n.default.timeStamp(),o={appid:g,timeStamp:i,keyword:this.search},r=a.default.hexMD5(n.default.objKeySort(o)+v),s=Object.assign({sign:r},o);n.default.getRequests("searchItem",s,(function(t){200==t.data.code?(e.keyList=t.data.data,0==t.data.data.length&&n.default.Toast("搜索的商品不存在")):n.default.Toast(t.data.msg)}))}},getWordtwo:function(t){var e=this;if(this.searchtwo=t.detail.value,t.detail.value.length){var i=n.default.timeStamp(),o={appid:g,timeStamp:i},r=a.default.hexMD5(n.default.objKeySort(o)+v),s=Object.assign({sign:r,keyword:this.searchtwo},o);n.default.getRequests("searchItemCommodity",s,(function(t){200==t.data.code?(e.keyListtwo=t.data.data,0==t.data.data.length&&n.default.Toast("搜索的商品不存在")):n.default.Toast(t.data.msg)}))}},deterMine:function(t){this.search=t.title,this.searchKey=0,this.wareName=t.title,0==t.attr.length&&(t.attr[0]={id:0,item_id:t.id,value:"/"}),this.wareList=t.attr,this.wareAttr=t.attr[0].value,this.attr_id=t.attr[0].id,this.item_id=t.attr[0].item_id,this.bitmap=!1},deterMinetwo:function(t){this.goodname=t.title,this.searchKey=0,0==t.attr.length&&(t.attr[0]={id:0,item_id:t.id,attr_title:"/"}),this.wareListtwo=t.attr,this.wareAttrtwo=t.attr[0].attr_title,this.attr_idtwo=t.attr[0].id,this.item_idtwo=t.attr[0].item_id},confirmWare:function(t){console.log(t),this.wareAttr=t.result,this.attr_id=t.obj.id,this.item_id=t.obj.item_id},confirmWaretwo:function(t){console.log(t),this.wareAttrtwo=t.result,this.attr_idtwo=t.obj.id,this.item_idtwo=t.obj.item_id},searchGood:function(){var t=this,e=n.default.timeStamp(),i={appid:g,timeStamp:e,attr_id:this.attr_id,item_id:this.item_id},o=a.default.hexMD5(n.default.objKeySort(i)+v),r=Object.assign({sign:o},i);n.default.getRequests("enquiry",r,(function(e){200==e.data.code?(t.purchases=e.data.data,0!=e.data.data.length?t.bitmap=!0:t.bitmap=!1):n.default.Toast(e.data.msg)}))},commodityBuyerList:function(){var t=this,e=n.default.timeStamp(),i={appid:g,timeStamp:e},o=a.default.hexMD5(n.default.objKeySort(i)+v),r=Object.assign({sign:o,date:this.time},i);n.default.getRequests("commodityBuyerList",r,(function(e){if(200==e.data.code){t.enquiryList=[];var i,a=l(e.data.data);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.look_more=!1,t.enquiryList.push(o)}}catch(r){a.e(r)}finally{a.f()}0==e.data.data.length?t.bitmaptwo=!0:t.bitmaptwo=!1}else n.default.Toast(e.data.msg)}))},lookMore:function(t){this.enquiryList[t].look_more?this.enquiryList[t].look_more=!1:this.enquiryList[t].look_more=!0},changeIcon:function(){this.showFind=!this.showFind},submitAdd:function(){var t=this,e=n.default.timeStamp(),i={appid:g,timeStamp:e},o=a.default.hexMD5(n.default.objKeySort(i)+v),r=Object.assign({sign:o,date:this.time,item_id:this.item_idtwo,attr_id:this.attr_idtwo},i);n.default.postRequests("addCommodity",r,(function(e){200==e.data.code?(n.default.Toast("添加成功"),t.commodityBuyerList()):n.default.Toast(e.data.msg)}))},deleteSign:function(e,i){var o=this;t.showModal({title:"",content:"是否删除该询价？",confirmColor:"#03A98E",success:function(t){if(t.confirm){var r=n.default.timeStamp(),s={appid:g,timeStamp:r},u=a.default.hexMD5(n.default.objKeySort(s)+v),d=Object.assign({sign:u,date:o.time,ids:e},s);n.default.getRequests("removeCommodity",d,(function(t){200==t.data.code?(n.default.Toast("删除成功"),o.enquiryList.splice(i,1),0==o.enquiryList.length&&(o.bitmaptwo=!0)):n.default.Toast(t.data.msg)}))}else t.cancel&&console.log("用户点击取消")}})},deleteAll:function(){var e=this;t.showModal({title:"",content:"将清空列表中供应商未报价的商品,确认吗？",confirmColor:"#03A98E",success:function(t){if(t.confirm){var i=n.default.timeStamp(),o={appid:g,timeStamp:i},r=a.default.hexMD5(n.default.objKeySort(o)+v),s=Object.assign({sign:r,date:e.time},o);n.default.getRequests("removeCommodity",s,(function(t){200==t.data.code?(n.default.Toast("删除成功"),e.enquiryList=[],e.bitmaptwo=!0):n.default.Toast(t.data.msg)}))}else t.cancel&&console.log("用户点击取消")}})},confirmHistory:function(t){this.historyDate=t.value},historySearch:function(){var t=this,e=n.default.timeStamp(),i={appid:g,timeStamp:e},o=a.default.hexMD5(n.default.objKeySort(i)+v),r=Object.assign({sign:o,date:this.time,history_date:this.historyDate},i);n.default.getRequests("historyList",r,(function(e){if(200==e.data.code){var i;t.historyList=[];var a,o=l(e.data.data);try{for(o.s();!(a=o.n()).done;){var r=a.value;r.status=!1}}catch(u){o.e(u)}finally{o.f()}0==e.data.data.length&&n.default.Toast("搜索的商品不存在"),(i=t.historyList).push.apply(i,s(e.data.data))}else n.default.Toast(e.data.msg)}))},checkedIndex:function(t){this.historyList[t].status=!this.historyList[t].status},copyAction:function(){this.showCopy=!0}},onShow:function(){this.commodityBuyerList()},onLoad:function(t){this.time=o.default.formatDate(2),this.time2=o.default.formatDate(0)}};e.default=_}).call(this,i("543d")["default"])},ccaa:function(t,e,i){},d4d6:function(t,e,i){"use strict";var a=i("ccaa"),n=i.n(a);n.a}},[["453d","common/runtime","common/vendor"]]]);