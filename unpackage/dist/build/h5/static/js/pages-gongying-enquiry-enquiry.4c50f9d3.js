(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-gongying-enquiry-enquiry"],{"0a72":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,"uni-page-body[data-v-0f8d20f9]{background-color:#f9f9f9}.purchaseNote .head[data-v-0f8d20f9]{position:fixed;width:100%;\n\t/* top: 0; */left:0;background:#f9f9f9}.purchaseNote .tab_box[data-v-0f8d20f9]{padding:0 %?30?%;color:#666;font-family:PingFang SC;margin-bottom:%?20?%}.purchaseNote .tab_box .tab[data-v-0f8d20f9]{height:%?60?%;line-height:%?60?%;padding-bottom:10rx;text-align:center}.purchaseNote .tab_box .tab.active[data-v-0f8d20f9]{color:#03a98e}.purchaseNote .tab_box .tab .xian[data-v-0f8d20f9]{width:%?38?%;height:%?5?%;background:#03a98e;border-radius:%?10?%;position:relative;left:50%;margin-left:%?-19?%}.purchaseNote .inp_box[data-v-0f8d20f9]{background-color:#fff;padding:%?15?%;border-bottom:%?10?% solid #f9f9f9}.purchaseNote .inp_box .time[data-v-0f8d20f9]{background-color:#f5f5f5;padding:%?15?% %?20?%;border-radius:%?50?% 0 0 %?50?%}.purchaseNote .inp_box .time uni-input[data-v-0f8d20f9]{width:%?350?%;margin-left:%?20?%}.purchaseNote .inp_box .time .time_inp[data-v-0f8d20f9]{width:%?550?%}.purchaseNote .inp_box .btn[data-v-0f8d20f9]{background-color:#03a98e;padding:%?15?% %?30?%;border-radius:0 %?50?% %?50?% 0;color:#fff}.purchaseNote .inp_box .right[data-v-0f8d20f9]{font-size:%?28?%}.purchaseNote .inp_box .right .text[data-v-0f8d20f9]{color:#666}.purchaseNote .list_box[data-v-0f8d20f9]{padding-top:%?85?%;padding-bottom:%?110?%}.purchaseNote .list_box .record_item[data-v-0f8d20f9]{padding:0 %?20?% 0 %?20?%;background:#fff}.purchaseNote .list_box .record_item .item[data-v-0f8d20f9]{background:#fff;padding:%?10?% 0;font-size:%?28?%}.purchaseNote .list_box .record_item .record_title[data-v-0f8d20f9]{background:#fff;padding:%?15?% 0;border-bottom:1px solid #f0f0f0}.purchaseNote .enquiry_item .item[data-v-0f8d20f9]{padding:0 %?20?%;background:#fff;border-bottom:1px solid #f0f0f0;padding-bottom:%?20?%}.purchaseNote .enquiry_item .item .title[data-v-0f8d20f9]{padding:%?20?% 0;background:#fff}.purchaseNote .enquiry_item .item .title .right .iconfont[data-v-0f8d20f9]{font-size:%?40?%}.purchaseNote .enquiry_item .item .title .left .badge[data-v-0f8d20f9]{display:inline-block;width:%?30?%;height:%?30?%;color:#fff;background:#03a98e;font-size:%?15?%;text-align:center;line-height:%?30?%;border-radius:50%;margin-right:%?10?%}.purchaseNote .enquiry_item .item .title .left .iconfont[data-v-0f8d20f9]{font-size:%?26?%;color:#666;margin-right:%?10?%}.purchaseNote .enquiry_item .item .content[data-v-0f8d20f9]{padding-left:%?30?%}.purchaseNote .enquiry_item .item .content .txt[data-v-0f8d20f9]{font-size:%?26?%;margin-bottom:%?15?%}.enquiry_bottom[data-v-0f8d20f9]{position:fixed;width:100%;left:0;bottom:%?100?%;z-index:99;background:#fff;border-bottom:%?1?% solid #f0f0f0}.enquiry_bottom .btm[data-v-0f8d20f9]{padding:%?15?% 0;color:#666;font-size:%?28?%}.enquiry_bottom .btm .iconfont[data-v-0f8d20f9]{font-size:%?36?%;color:#666}.enquiry_bottom .btm uni-view[data-v-0f8d20f9]{padding:%?10?% %?80?%}.enquiry_bottom .btm uni-view[data-v-0f8d20f9]:nth-child(1){border-right:1px solid #f0f0f0}.enquiry_bottom .btm uni-view[data-v-0f8d20f9]:nth-child(2){border-right:1px solid #f0f0f0}.enquiry_item .show_bitmap[data-v-0f8d20f9]{padding-top:20%}.enquiry_item .supplier_style .single_ask[data-v-0f8d20f9]{background:#fff;padding:0 %?30?%;height:%?88?%;background:#fff;padding:0 15px;display:-webkit-box;display:-webkit-flex;display:flex;height:44px;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.enquiry_item .supplier_style .single_ask .input[data-v-0f8d20f9]{border:1px solid #d6d6d6!important;width:%?166?%;border-radius:%?8?%;margin-right:%?20?%;padding:%?10?%;font-size:%?26?%}.query_price[data-v-0f8d20f9]{background:#fff;height:100vh}.query_price .bar_title[data-v-0f8d20f9]{display:-webkit-box;display:-webkit-flex;display:flex;height:47px;line-height:47px;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.query_price .search_style[data-v-0f8d20f9]{width:80%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background:#f6f6f6;border-radius:20px;padding:0 10px;height:32px;margin-left:1%}.search_content[data-v-0f8d20f9]{padding:%?20?%;height:90vh;overflow-y:scroll}.search_content>uni-view[data-v-0f8d20f9]{height:%?60?%;line-height:%?60?%;font-size:%?26?%;color:#343434}.caigou_index_height[data-v-0f8d20f9]{height:100vh;background:#fff}.caigou_index_height .record_item .show_bitmap[data-v-0f8d20f9]{padding-top:21%}body.?%PAGE?%[data-v-0f8d20f9]{background-color:#f9f9f9}",""]),t.exports=e},"1c8a":function(t,e,i){"use strict";var a=i("e29a"),n=i.n(a);n.a},"3bd6":function(t,e,i){"use strict";var a=i("9226"),n=i.n(a);n.a},4601:function(t,e,i){"use strict";var a,n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"tabbar"},[i("v-uni-view",{staticClass:"list"},[i("v-uni-view",{staticClass:"item"},t._l(t.userList,(function(e,a){return i("v-uni-view",{key:a,class:t.tabarIndex==a?"color":"incolor",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.pageUrl(e,a)}}},[i("v-uni-view",{class:"iconfont "+e.icon}),i("v-uni-view",{staticClass:"name"},[t._v(t._s(e.name))])],1)})),1)],1)],1)},s=[];i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}))},"4e8d":function(t,e,i){"use strict";i.r(e);var a=i("4601"),n=i("b5f6");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("1c8a");var o,r=i("f0c5"),d=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"6825819b",null,!1,a["a"],o);e["default"]=d.exports},7316:function(t,e,i){"use strict";i.r(e);var a=i("d5c8"),n=i("8ae8");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("3bd6");var o,r=i("f0c5"),d=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"0f8d20f9",null,!1,a["a"],o);e["default"]=d.exports},"881b":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".color[data-v-6825819b]{color:#03a98d}.incolor[data-v-6825819b]{color:#d5d5d5}.tabbar[data-v-6825819b]{position:fixed;width:100%;bottom:0;left:0;background:#fffeff}.tabbar .list[data-v-6825819b]{width:100%;font-size:%?28?%;text-align:center;padding:%?10?% 0}.tabbar .list .item[data-v-6825819b]{width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-justify-content:space-around;justify-content:space-around}.tabbar .list .item .iconfont[data-v-6825819b]{font-size:%?40?%;margin-bottom:%?5?%}",""]),t.exports=e},"8ae8":function(t,e,i){"use strict";i.r(e);var a=i("b238"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},9226:function(t,e,i){var a=i("0a72");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("70136245",a,!0,{sourceMap:!1,shadowMode:!1})},b238:function(t,e,i){"use strict";(function(t){var a=i("ee27");i("ac1f"),i("841c"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("54f8")),s=a(i("fa94")),o=a(i("7fee")),r=a(i("9752")),d=a(i("3be1")),c=a(i("4e8d")),f=a(i("8355")),l=a(i("6d8d")),u=getApp().globalData,p=u.navBar,v=u.appid,b=u.appsecret,h={components:{tabar:c.default,wPicker:d.default,ePicker:f.default,nPicker:l.default},data:function(){return{navBar:p,showTabar:!0,bitmap:!1,bitmaptwo:!0,searchKey:!0,search:"",firstWare:!1,wareName:"",wareAttr:"请选择",wareList:[],attr_id:"",item_id:"",purchases:[],isActive:1,tabNum:3,time:"",time2:"",wareListProps:{label:"value",value:"item_id"},dateVisible1:!1,dateVisible2:!1,list:[{tab:"历史记录",id:1},{tab:"开始报价",id:2}],supplierList:[],keyList:[]}},methods:{getWord:function(t){var e=this;if(this.search=t.detail.value,t.detail.value.length){var i=o.default.timeStamp(),a={appid:v,timeStamp:i,keyword:this.search},n=s.default.hexMD5(o.default.objKeySort(a)+b),r=Object.assign({sign:n},a);o.default.getRequests("searchItem",r,(function(t){200==t.data.code?(e.keyList=t.data.data,0==t.data.data.length&&o.default.Toast("搜索的商品不存在")):o.default.Toast(t.data.msg)}))}},deterMine:function(t){this.search=t.title,this.searchKey=!0,this.wareName=t.title,0==t.attr.length&&(t.attr[0]={id:0,item_id:t.id,value:"/"}),this.wareList=t.attr,this.wareAttr=t.attr[0].value,this.attr_id=t.attr[0].id,this.item_id=t.attr[0].item_id,this.bitmap=!1},confirmWare:function(t){this.wareAttr=t.result,this.attr_id=t.obj.id,this.item_id=t.obj.item_id},searchGood:function(){var t=this,e=o.default.timeStamp(),i={appid:v,timeStamp:e,attr_id:this.attr_id,item_id:this.item_id},a=s.default.hexMD5(o.default.objKeySort(i)+b),n=Object.assign({sign:a},i);o.default.getRequests("enquiry",n,(function(e){200==e.data.code?(t.purchases=e.data.data,0!=e.data.data.length?t.bitmap=!0:t.bitmap=!1):o.default.Toast(e.data.msg)}))},onConfirm:function(t,e){this.time=t.value},exportPrice:function(){this.$refs.date2.show()},addPrice:function(t,e){var i=this,a=o.default.timeStamp(),n={appid:v,timeStamp:a},r=s.default.hexMD5(o.default.objKeySort(n)+b),d=Object.assign({sign:r,list_id:t.id,price:t.price},n);o.default.postRequests("addCommoditySupplier",d,(function(t){200==t.data.code?(o.default.Toast("修改成功"),i.supplierList[e].is_exist=1):o.default.Toast(t.data.msg)}))},deletePrice:function(e,i){var a=this;uni.showModal({title:"",content:"是否删除该商品的报价？",confirmColor:"#03A98E",success:function(n){if(n.confirm){var r=o.default.timeStamp(),d={appid:v,timeStamp:r},c=s.default.hexMD5(o.default.objKeySort(d)+b),f=Object.assign({sign:c,list_id:e.id},d);o.default.getRequests("delSupplierPrice",f,(function(t){200==t.data.code?(o.default.Toast("成功删除价格"),a.supplierList[i].is_exist=0,a.supplierList[i].price=""):o.default.Toast(t.data.msg)}))}else n.cancel&&t.log("用户点击取消")}})},confirmHistory:function(t,e){var i=this,a=o.default.timeStamp(),n={appid:v,timeStamp:a},r=s.default.hexMD5(o.default.objKeySort(n)+b),d=Object.assign({sign:r,date:this.time,history_date:t.value},n);o.default.getRequests("importSupplierPrice",d,(function(t){200==t.data.code?(i.supplierList=t.data.data,window.location.reload()):o.default.Toast(t.data.msg)}))},tabs:function(t,e){this.isActive=e},SupplierList:function(){var t=this,e=o.default.timeStamp();this.supplierList=[];var i={appid:v,timeStamp:e},a=s.default.hexMD5(o.default.objKeySort(i)+b),n=Object.assign({sign:a,date:this.time},i);o.default.getRequests("commoditySupplierList",n,(function(e){200==e.data.code?(t.supplierList=e.data.data,0==e.data.data.length?(t.bitmaptwo=!0,o.default.Toast("无商品信息")):t.bitmaptwo=!1):o.default.Toast(e.data.msg)}))},deleteAll:function(){var e=this;uni.showModal({title:"",content:"将清空列表中所有的报价,确认吗？",confirmColor:"#03A98E",success:function(i){if(i.confirm){var a=o.default.timeStamp(),r={appid:v,timeStamp:a},d=s.default.hexMD5(o.default.objKeySort(r)+b),c=Object.assign({sign:d,date:e.time},r);o.default.getRequests("delSupplierPrice",c,(function(t){if(200==t.data.code){o.default.Toast("操作成功");var i,a=[],s=(0,n.default)(e.supplierList);try{for(s.s();!(i=s.n()).done;){var r=i.value;r.price="",r.is_exist=0,a.push(r)}}catch(d){s.e(d)}finally{s.f()}e.suplierList=a}else o.default.Toast(t.data.msg)}))}else i.cancel&&t.log("用户点击取消")}})}},onShow:function(){var t=this;this.SupplierList(),window.onresize=function(){t.showTabar=!t.showTabar}},onLoad:function(){this.time=r.default.formatDate(),this.time2=r.default.formatDate(0)}};e.default=h}).call(this,i("5a52")["default"])},b5f6:function(t,e,i){"use strict";i.r(e);var a=i("d78c"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},d5c8:function(t,e,i){"use strict";var a={myApphead:i("070c").default,myBitmap:i("362b").default,wPicker:i("3be1").default,uniIcons:i("a30f").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.searchKey?i("v-uni-view",{staticClass:"caigou_index",class:{caigou_index_height:0==t.isActive}},[i("my-apphead"),i("v-uni-view",{staticClass:"purchaseNote"},[i("v-uni-view",{staticClass:"head"},[i("v-uni-view",{staticClass:"tab_box flex flex_align_center flex_around"},t._l(t.list,(function(e,a){return i("v-uni-view",{staticClass:"tab",class:{active:t.isActive===a},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.tabs(e,a)}}},[i("v-uni-view",[t._v(t._s(e.tab))]),t.isActive==a?i("v-uni-view",{staticClass:"xian"}):t._e()],1)})),1)],1),i("v-uni-view",{staticClass:"list_box"},[0==t.isActive?i("v-uni-view",{staticClass:"inp_box flex flex_center"},[i("v-uni-view",{staticClass:"left",staticStyle:{"margin-right":"30rpx"}},[i("v-uni-view",{staticClass:"flex flex_center"},[i("v-uni-view",{staticClass:"time"},[i("v-uni-input",{attrs:{type:"text",placeholder:"请选择商品",disabled:"true"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.searchKey=!1}},model:{value:t.wareName,callback:function(e){t.wareName=e},expression:"wareName"}})],1),i("v-uni-view",{staticClass:"btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.searchGood.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"iconfont iconseach-"})],1)],1)],1),i("v-uni-view",{staticClass:"right",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.firstWare=!0}}},[t._v("规格："),i("v-uni-text",[t._v(t._s(t.wareAttr))])],1)],1):t._e(),1==t.isActive?i("v-uni-view",{staticClass:"inp_box flex flex_center"},[i("v-uni-view",{staticClass:"left"},[i("v-uni-view",{staticClass:"flex flex_center"},[i("v-uni-view",{staticClass:"time"},[i("v-uni-input",{staticClass:"time_inp",attrs:{type:"text",placeholder:"请选择日期",disabled:"true"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.$refs.date.show()}},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1),i("v-uni-view",{staticClass:"btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.SupplierList.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"iconfont iconseach-"})],1)],1)],1)],1):t._e(),0==t.isActive?i("v-uni-view",{staticClass:"record_item"},[i("v-uni-view",{staticClass:"record_title"},[t._v("近5次供应单价（元）")]),t.bitmap?i("v-uni-view",t._l(t.purchases,(function(e,a){return i("v-uni-view",{staticClass:"item flex flex_center flex_between"},[i("v-uni-view",[t._v(t._s(e.created_at))]),i("v-uni-view",{staticClass:"red_font"},[t._v("¥"+t._s(e.p_price))])],1)})),1):i("v-uni-view",[i("my-bitmap")],1)],1):t._e(),1==t.isActive?i("v-uni-view",{staticClass:"enquiry_item"},[t.bitmaptwo?i("v-uni-view",{},[i("my-bitmap")],1):i("v-uni-view",{staticClass:"supplier_style"},t._l(t.supplierList,(function(e,a){return i("v-uni-view",{staticClass:"single_ask"},[i("v-uni-view",[t._v(t._s(e.item_title)+t._s(e.attr_title?"("+e.attr_title+")":""))]),i("v-uni-view",{staticClass:"flex flex_align_center"},[0==e.is_exist?i("v-uni-input",{staticClass:"input",attrs:{type:"number",placeholder:"报价"},model:{value:e.price,callback:function(i){t.$set(e,"price",i)},expression:"item.price"}}):i("v-uni-text",{staticClass:"input"},[t._v(t._s(e.price))]),i("v-uni-text",{staticClass:"iconfont",class:e.is_exist?"iconshanchu":"iconxuanzhong",style:{color:e.is_exist?"#666":"#04AA8E"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),e.is_exist?t.deletePrice(e,a):t.addPrice(e,a)}}})],1)],1)})),1)],1):t._e()],1),1==t.isActive&&1==t.showTabar?i("v-uni-view",{staticClass:"enquiry_bottom"},[i("v-uni-view",{staticClass:"btm flex flex_around"},[i("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.exportPrice.apply(void 0,arguments)}}},[t._v("导入价格")]),i("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.deleteAll.apply(void 0,arguments)}}},[t._v("批量清除")])],1)],1):t._e()],1),i("e-picker",{ref:"date",attrs:{mode:"date",value:t.time,fields:"day",startYear:2020,endYear:"2029","disabled-before":!0},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.onConfirm(e,"date")}}},[t._v("采购日期")]),i("w-picker",{ref:"selector",attrs:{visible:t.firstWare,mode:"selector","default-type":"name","default-props":t.wareListProps,options:t.wareList},on:{"update:visible":function(e){arguments[0]=e=t.$handleEvent(e),t.firstWare=e},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.confirmWare(e,"selector")}}}),i("w-picker",{ref:"date2",attrs:{visible:t.dateVisible2,mode:"date",startYear:"2017",endYear:"2029",value:t.time2,current:!0,fields:"day","disabled-after":!0},on:{"update:visible":function(e){arguments[0]=e=t.$handleEvent(e),t.dateVisible2=e},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.confirmHistory(e,"date1")}}}),t.showTabar?i("tabar",{attrs:{tabarIndex:t.tabNum}}):t._e()],1):i("v-uni-view",{staticClass:"query_price"},[i("my-apphead"),i("v-uni-view",{staticClass:"bar_title"},[i("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.searchKey=!0}}},[i("uni-icons",{attrs:{type:"arrowleft",size:"30"}})],1),i("v-uni-view",{staticClass:"search_style"},[i("uni-icons",{attrs:{type:"search",size:"20"}}),i("v-uni-input",{attrs:{type:"text",focus:0==t.searchKey,placeholder:"请输入商品"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.getWord.apply(void 0,arguments)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1),i("v-uni-view",{staticStyle:{height:"5px",background:"#f6f6f6"}}),i("v-uni-view",{staticClass:"search_content"},t._l(t.keyList,(function(e,a){return i("v-uni-view",{on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.deterMine(e)}}},[t._v(t._s(e.title))])})),1)],1)},s=[];i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}))},d78c:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={props:["tabarIndex"],data:function(){return{userList:[{icon:"iconindex",name:"首页",url:"/pages/gongying/index/index"},{icon:"iconcart",name:"备货",url:"/pages/gongying/stockUp/stockUp"},{icon:"iconhedui",name:"供应单",url:"/pages/gongying/supply/supply"},{icon:"iconxunjia",name:"询价",url:"/pages/gongying/enquiry/enquiry"},{icon:"iconUserpersonalinform",name:"我的",url:"/pages/gongying/user/user"}]}},created:function(t){},methods:{pageUrl:function(t,e){uni.reLaunch({url:t.url})}}};e.default=a},e29a:function(t,e,i){var a=i("881b");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("623906fe",a,!0,{sourceMap:!1,shadowMode:!1})}}]);